const url_shortener=async(e="",t=!1)=>{async function n(){const e=new firebase.auth.GithubAuthProvider;try{let t=await firebase.auth().signInWithPopup(e),n=t.credential,r=n.accessToken,o=t.user;return console.log({credential:n,token:r,user:o}),{credential:n,token:r,user:o}}catch(e){let{code:t,message:n,email:r,credential:o}=e;return{code:t,message:n,email:r,credential:o}}}async function r(e,t){const n="su-db",r=`https://api.github.com/repos/${user_name}/${n}/issues`;let o=new Headers({Accept:"application/vnd.github.v3+json",Authorization:`Bearer ${e}`,"Content-Type":"application/json"}),i={title:t,body:"this is create by app",assignees:[],labels:[],milestone:null},s={method:"POST",headers:o,body:JSON.stringify(i),redirect:"follow"};try{let e=await fetch(r,s);return e=await e.json(),{num:e.number,user:e.user.login}}catch(e){return console.log("error",e),!1}}let o=!1;if(t){let n=await r(t,e);if(n)return o=!0,{url:`https://x94fujo6rpg.github.io/su/${n.num}`,token:t}}if(!o||!t){let t=await n();if(t.token){let n=await r(t.token,e);return!!n&&{url:`https://x94fujo6rpg.github.io/su/${n.num}`,token:t.token}}return console.log("unable to get github token",t),!1}};