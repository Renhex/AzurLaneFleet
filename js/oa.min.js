const url_shortener=async(e="",t=!1)=>{async function n(){const e=new firebase.auth.GithubAuthProvider;try{let t=await firebase.auth().signInWithPopup(e),n=t.credential,r=n.accessToken,i=t.user;return console.log({credential:n,token:r,user:i}),{credential:n,token:r,user:i}}catch(e){let{code:t,message:n,email:r,credential:i}=e;return{code:t,message:n,email:r,credential:i}}}async function r(e,t){const n="alft-db",r=`https://api.github.com/repos/renhex/${n}/issues`;let i=new Headers({Accept:"application/vnd.github.v3+json",Authorization:`Bearer ${e}`,"Content-Type":"application/json"}),o={title:t,body:"this is create by app",assignees:[],labels:[],milestone:null},a={method:"POST",headers:i,body:JSON.stringify(o),redirect:"follow"};try{let e=await fetch(r,a);return e=await e.json(),{num:e.number,user:e.user.login}}catch(e){return console.log("error",e),!1}}let i=!1;if(t){let n=await r(t,e);if(n)return i=!0,{url:`https://renhex.github.io/alft/${n.num}`,token:t}}if(!i||!t){let t=await n();if(t.token){let n=await r(t.token,e);return!!n&&{url:`https://renhex.github.io/alft/${n.num}`,token:t.token}}return console.log("unable to get github token",t),!1}};