const url_shortener=async(e="",t=!1)=>{async function n(){const e=new firebase.auth.GithubAuthProvider;try{let t=await firebase.auth().signInWithPopup(e),n=t.credential,o=n.accessToken,r=t.user;return console.log({credential:n,token:o,user:r}),{credential:n,token:o,user:r}}catch(e){let{code:t,message:n,email:o,credential:r}=e;return{code:t,message:n,email:o,credential:r}}}async function o(e,t){const n="su-db",o=`https://api.github.com/repos/x94fujo6rpg/${n}/issues`;let r=new Headers({Accept:"application/vnd.github.v3+json",Authorization:`Bearer ${e}`,"Content-Type":"application/json"}),i={title:t,body:"this is create by app",assignees:[],labels:[],milestone:null},s={method:"POST",headers:r,body:JSON.stringify(i),redirect:"follow"};try{let e=await fetch(o,s);return e=await e.json(),console.log(e),{num:e.number,user:e.user.login}}catch(e){return console.log("error",e),!1}}let r=!1;if(t){let n=await o(t,e);if(n)return r=!0,{url:`https://x94fujo6rpg.github.io/su/${n.num}`,token:t}}if(!r||!t){let t=await n();if(t.token){let n=await o(t.token,e);return!!n&&{url:`https://x94fujo6rpg.github.io/su/${n.num}`,token:t.token}}return console.log("unable to get github token",t),!1}};